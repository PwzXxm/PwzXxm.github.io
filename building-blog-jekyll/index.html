<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Using Jekyll + Github Pages to build a blog</title>
    <meta name="description" content="Why Jekyll and Github PagesJekyll is an static site generator, it is simple to use with YAML front matter. It is quite convenient to blog with markdown and J...">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="canonical" href="http://www.pwzxxm.com/building-blog-jekyll/">
    <link rel="alternate" type="application/rss+xml" title="PwzXxm" href="http://www.pwzxxm.com/feed.xml">
    <link rel="shortcut icon" href="/img/favicon.png" type="image/x-icon" />
    <link rel="icon" href="/img/favicon.png" type="image/x-icon" />
    <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71107137-1', 'auto');
  ga('send', 'pageview');

</script>


  <body>
    <header class="site-header glass">

  <div class="wrapper">

    
    <a class="site-title" href="/">PwzXxm</a>
    

    <nav class="site-nav">
      <span class="english">
      
      <a href="/building-blog-jekyll/" style="color: #cdcdcd">EN</a>
      
    </span>
    <span class="chinese">
      
      <a href="/cn/building-blog-jekyll/">中</a>
      
    </span>
    </nav>

  </div>

</header>

    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Using Jekyll + Github Pages to build a blog</h1>
    <p class="post-meta">
      <time datetime="2015-12-15T00:00:00+11:00" itemprop="datePublished">
        
        Dec 15, 2015
        
      </time>
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h2 id="why-jekyll-and-github-pages">Why Jekyll and Github Pages</h2>

<p><a href="https://jekyllrb.com/">Jekyll</a> is an static site generator, it is simple to use with YAML front matter. It is quite convenient to blog with markdown and Jekyll supports it build-in. <a href="https://pages.github.com/">Github Pages</a> provide the space to host the website for free. Both of them are well-documented, and works well with each other. One thing that makes they works well but not perfect is that although Github Pages can generate the website using Jekyll but as it generates in safe mode, it does not support Jekyll plugin. However, the good news is we can generate the site locally and then push it to Github. It sounds like not convenient but we can write a bash script to do so automatically in one step. We will talk about it later.</p>

<h2 id="preparations">Preparations</h2>

<ol>
<li>Know <a href="http://jekyllrb.com/docs/frontmatter/">YAML front matter</a> is something you can put at the front of a script and it can automatically

<ul>
<li>have part of the layout and tags you defined before</li>
<li>define variables ([Liquid]tags(<a href="http://liquidmarkup.org/)">http://liquidmarkup.org/)</a>)</li>
</ul></li>
<li>If you don&#39;t know HMTL, CSS or JavaScript, you would better check out <a href="http://www.w3schools.com/">W3School</a> and at least know the basic of them.</li>
<li>Be able to using <code class="inline-code">git</code> commands, if not please check <a href="http://rogerdudler.github.io/git-guide/">Git tutorial</a> or search on Google. You could use a desktop version instead of command lines, but I think it&#39;s better to try comment line once because it may help you to have a better understanding of how it works.</li>
</ol>

<h2 id="set-up-repository">Set up repository</h2>

<p>Following the steps on <a href="https://pages.github.com/">Github Pages</a> to initiate the repository. <strong>Caution: If you are building user/organisation pages, please use <code class="inline-code">master</code> branch, if you are building project pages, please use <code class="inline-code">gh-pages</code> instead.</strong></p>

<h2 id="install-and-initiate">Install and Initiate</h2>

<p>Steps are shown <a href="https://help.github.com/articles/using-jekyll-with-pages/">here</a>.</p>

<p>After installation, to initiate a basic theme Jekyll website at current folder, simply run</p>
<div class="highlight"><pre><code class="text"><a name="line-1"></a>Jekyll new .
<a name="line-2"></a>git init
</code></pre></div>
<p>If you have a error says the directory is not empty, just move all files to other directory and move them back after initiation.</p>

<h2 id="running-jekyll-and-test-websites-locally">Running Jekyll and Test Websites Locally</h2>

<p>If you use <code class="inline-code">bundler</code>, you need to use <code class="inline-code">bundle exec jekyll server</code> or <code class="inline-code">bundle exec jekyll serve</code>.<br>For those who don&#39;t, please use <code class="inline-code">jekyll server</code> or <code class="inline-code">jekyll serve</code>.</p>

<p>Leave command window as it is running and then open your browser and navigate to <code class="inline-code">http://localhost:4000</code> and you can see your site locally.</p>

<h2 id="configuring">Configuring</h2>

<h3 id="_config-yml-file">_config.yml file</h3>

<p><code class="inline-code">_config.yml</code> contains settings for the website, check out details at the official website <a href="http://jekyllrb.com/docs/configuration/">here</a>.</p>

<table><thead>
<tr>
<th>Variables</th>
<th>Usage</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>The title of the website, by default it will shown at the website and the search result in a search engine</td>
</tr>
<tr>
<td>email</td>
<td>It is used in the contact list if you choose to use it</td>
</tr>
<tr>
<td>description</td>
<td>By default it is used in the meta tag in the head and shown in the footer</td>
</tr>
<tr>
<td>baseurl</td>
<td>the subpath of your site, e.g. <code class="inline-code">/blog</code> will have <code class="inline-code">www.pwzxxm./com/blog</code></td>
</tr>
<tr>
<td>url</td>
<td>the base hostname and protocol for the site, e.g. <code class="inline-code">http://www.pwzxxm.com</code></td>
</tr>
<tr>
<td>github_username<br>twitter_username</td>
<td>shown in the contact list in the footer if you wish</td>
</tr>
<tr>
<td>markdown</td>
<td>which markdown engine you want to use, e.g. <code class="inline-code">kramdown</code> <code class="inline-code">redcarpet</code></td>
</tr>
<tr>
<td>highlighter</td>
<td>which syntax highlighter you want to use, e.g. <code class="inline-code">pygments</code> <code class="inline-code">rouge</code></td>
</tr>
<tr>
<td>permalink</td>
<td>set to <code class="inline-code">pretty</code> will have url like <code class="inline-code">site_url/time/title</code> <br> you can set your own like <code class="inline-code">/:title/</code> <a href="http://jekyllrb.com/docs/permalinks/">See details</a></td>
</tr>
<tr>
<td>pagination</td>
<td>the number of posts you want to display on each page</td>
</tr>
</tbody></table>

<h3 id="host-your-website-using-custom-domain">Host your website using custom domain</h3>

<ul>
<li>you need to buy a domain from a domain registrar, like <a href="https://godaddy.com">Godaddy</a>.</li>
<li>add a <code class="inline-code">CNAME</code> file which contains your custom domain name in the root of your repository.</li>
<li>If your custom domain is a subdomain (like <code class="inline-code">www.pwzxxm.com</code> or <code class="inline-code">blog.pwzxxm.com</code>), then you need to add a <code class="inline-code">CNAME</code> record in your domain provider or DNS server provider if you are using custom DNS service.</li>
<li>If your domain is an apex domain (only have one dot in your custom domain), you need to set up <code class="inline-code">A</code>, <code class="inline-code">ALIAS</code> or <code class="inline-code">ANAME</code> records. Add <code class="inline-code">192.30.252.153</code> and <code class="inline-code">192.30.252.154</code> to your records.</li>
<li><a href="https://help.github.com/articles/setting-up-a-custom-domain-with-github-pages/">Find more details</a></li>
</ul>

<h3 id="pagination">Pagination</h3>

<p>There are two basic scripts can do pagination on <a href="http://jekyllrb.com/docs/pagination/">Jekyll official documentation</a>.
However, I found this pagination from <a href="http://www.timble.net/blog/2015/05/07/better-pagination-for-jekyll.html">Timble</a> which is awesome.</p>

<h3 id="multi-language-site">Multi-language site</h3>

<p>Check out <a href="http://jekyll-langs.liaohuqiu.net/">Jekyll Multi Language Plugin</a>.</p>

<h3 id="build-the-site-locally-if-you-use-plugins">Build the site locally if you use plugins</h3>

<p>The problem is Github build Jekyll websites in safe mode so the plugin won&#39;t work. However, we can create a &#39;dummy&#39; repository to generate the site first and then move the content in <code class="inline-code">_site</code> folder to the original repository.</p>

<ol>
<li>generate the site locally using <code class="inline-code">bundle exec jekyll serve build</code> or <code class="inline-code">jekyll build</code> in the &#39;dummy&#39; repository.</li>
<li>copy all files to the actual repository excludes <code class="inline-code">README.md.</code></li>
<li>cut the files under  <code class="inline-code">_site</code> folders to the root path of the repository.</li>
<li><code class="inline-code">touch .nojekyll</code> to disable github to generate the site</li>
<li>commit all changes.</li>
</ol>

<p>Here is a bash script:</p>
<div class="highlight"><pre><code class="bash"><a name="line-1"></a><span class="c">#!/bin/bash</span>
<a name="line-2"></a>
<a name="line-3"></a><span class="nv">comment</span><span class="o">=</span><span class="s2">&quot;$1&quot;</span>
<a name="line-4"></a><span class="nv">push_commit</span><span class="o">=</span><span class="s2">&quot;git commit -a -m &#39;$comment&#39;&quot;</span>
<a name="line-5"></a>
<a name="line-6"></a><span class="c"># commit and push changes</span>
<a name="line-7"></a><span class="nb">eval</span> <span class="s1">&#39;cd ~/git/local&#39;</span>  <span class="c"># modify PATH here</span>
<a name="line-8"></a><span class="nb">eval</span> <span class="s1">&#39;bundle exec jekyll build&#39;</span>
<a name="line-9"></a><span class="nb">eval</span> <span class="s1">&#39;git add .&#39;</span>
<a name="line-10"></a><span class="nb">eval</span> <span class="nv">$push_commit</span>
<a name="line-11"></a><span class="nb">eval</span> <span class="s1">&#39;git push --all origin&#39;</span>
<a name="line-12"></a>
<a name="line-13"></a><span class="c"># copy remove in pwzxxm.github.io</span>
<a name="line-14"></a><span class="nb">eval</span> <span class="s1">&#39;cd ~/git/PwzXxm.github.io&#39;</span> <span class="c"># modify PATH here</span>
<a name="line-15"></a><span class="nb">eval</span> <span class="s1">&#39;cp ./README.md ~/git/&#39;</span> <span class="c"># modify where you want to temporally put the README.md</span>
<a name="line-16"></a><span class="nb">eval</span> <span class="s1">&#39;rm -rf ./*&#39;</span>
<a name="line-17"></a><span class="nb">eval</span> <span class="s1">&#39;cp -r ~/git/local/* ./&#39;</span> <span class="c"># modify PATH here</span>
<a name="line-18"></a><span class="nb">eval</span> <span class="s1">&#39;cp -r _site/* ./&#39;</span>
<a name="line-19"></a><span class="nb">eval</span> <span class="s1">&#39;rm -rf _site/*&#39;</span>
<a name="line-20"></a><span class="nb">eval</span> <span class="s1">&#39;cp ~/git/README.md ./&#39;</span> <span class="c"># put the file back</span>
<a name="line-21"></a><span class="nb">eval</span> <span class="s1">&#39;touch .nojekyll&#39;</span>
<a name="line-22"></a>
<a name="line-23"></a><span class="c"># commit and push changes</span>
<a name="line-24"></a><span class="nb">eval</span> <span class="s1">&#39;git add .&#39;</span>
<a name="line-25"></a><span class="nb">eval</span> <span class="nv">$push_commit</span>
<a name="line-26"></a><span class="nb">eval</span> <span class="s1">&#39;git push --all origin&#39;</span>
<a name="line-27"></a><span class="nb">echo</span> <span class="s2">&quot;Done&quot;</span>
</code></pre></div>
<p>To use it, simply copy it to a <code class="inline-code">yourchoice.sh</code> file, change the paths in the file and give it permission to run, and run it.</p>

<h2 id="this-site">This Site</h2>

<p>If you like the style or you want to know the codes behind it, just check out:</p>

<ul>
<li><a href="https://github.com/PwzXxm/PwzXxm.github.io">Pwzxxm.github.io</a></li>
<li><a href="https://github.com/PwzXxm/local-site">local site</a>.</li>
</ul>

<p>You can grap and use any code from my site as you wish. However, the content of this site is copyright, if you want to use any posts please contact me.</p>

  </div>

</article>


<span class="tags">
  <ul>
    
    
    Tags:
    
    <li><a href="/tags/#blog">blog</a></li>
    
    
  </ul>
</span>


<p id="ex"></p>

<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
var disqus_config = function () {
  //var disqus_developer = 1; // Comment out when the site is live
  var disqus_shortname = 'pwzxxm'
  //this.page.url = http://www.pwzxxm.com; // Replace PAGE_URL with your page's canonical URL variable
  
  this.page.identifier = /building-blog-jekyll/; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  this.language="en";
  
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//pwzxxm.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      </div>
    </div>
    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">PwzXxm</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="col1-list">
          ʕ •ᴥ•ʔ
          <li>
            
            <a href="/tags">Tags</a>
            
          </li>
          <li>
            
            <a href="/about">About</a>
            
          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="col2-list">
          <li>
            <a href="mailto:cepheidfov@gmail.com">
  <span class="icon icon--email">
    <svg viewBox="0 0 841.891 595.281">
<g>
	<g>
		<defs>
			<path id="SVGID_1_" d="M15.969,539.152V58.521l279.627,243.07L15.969,539.152z M826.031,539.152L546.349,301.648l279.682-243.24
				V539.152z M421.029,354.871L34.388,23.519C44.785,13.8,58.797,7.726,74.166,7.726h693.498c15.539,0,29.607,5.961,39.947,15.68
				L421.029,354.871z M521.205,325.011l286.35,245.441c-10.396,9.719-24.408,15.82-39.834,15.82H74.222
				c-15.482,0-29.551-5.988-39.891-15.707l286.463-245.611l100.234,87.746L521.205,325.011z"/>
		</defs>
		<clipPath id="SVGID_2_">
			<use xlink:href="#SVGID_1_"  overflow="visible"/>
		</clipPath>
		<rect x="-273.319" y="-281.561" clip-path="url(#SVGID_2_)" fill='#828282' width="1388.637" height="1157.121"/>
	</g>
</g>
</svg>

  </span>
  Email
</a>

          </li>
          <li>
              <a href="/feed.xml">
    <span class="icon icon--rss">
      <svg viewBox="0 0 1024.000000 1024.000000">
<g transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M1475 9116 c-60 -19 -84 -34 -143 -90 -67 -63 -99 -125 -112 -213
-12 -84 -13 -813 -1 -905 11 -83 39 -142 97 -207 63 -70 129 -100 245 -111 52
-5 169 -16 261 -25 1285 -122 2565 -662 3579 -1508 978 -818 1721 -1972 2079
-3232 116 -410 202 -911 226 -1310 3 -60 12 -134 19 -163 25 -98 91 -178 195
-233 l45 -24 520 0 520 0 50 26 c63 34 150 125 177 186 30 67 32 148 14 383
-124 1535 -666 2971 -1582 4190 -278 370 -517 638 -920 1030 -616 600 -1419
1145 -2224 1510 -865 391 -1746 619 -2693 695 -223 18 -298 18 -352 1z"/>
<path d="M1530 6200 c-30 -4 -77 -16 -103 -28 -70 -31 -158 -124 -188 -197
l-24 -60 0 -460 c0 -458 0 -460 23 -517 30 -74 108 -160 176 -193 39 -19 90
-30 206 -45 389 -51 688 -127 995 -254 128 -53 392 -190 513 -266 467 -292
927 -759 1209 -1228 267 -442 419 -894 493 -1462 23 -183 44 -234 125 -309
101 -92 95 -91 630 -91 451 0 466 1 522 22 42 15 74 37 114 78 124 127 134
204 78 599 -127 903 -505 1779 -1072 2486 -263 327 -602 658 -939 913 -704
534 -1610 898 -2483 996 -199 23 -214 24 -275 16z"/>
<path d="M2134 3266 c-298 -49 -564 -220 -737 -473 -123 -182 -178 -369 -178
-613 0 -143 15 -242 51 -350 94 -284 339 -548 610 -660 157 -65 215 -75 435
-74 173 0 210 3 277 21 307 86 563 295 704 574 155 310 149 722 -17 1018 -115
205 -326 398 -528 482 -182 76 -429 106 -617 75z"/>
</g>
</svg>

    </span>
    RSS
  </a>

          </li>
          
          <li>
            <a href="https://github.com/PwzXxm">
  <span class="icon icon--github">
    <svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>

  </span>
  <span class="username">
    Github
  </span>
</a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <ul class="col3-list">
          <li>© 2015 PwzXxm All Rights Reserved.</li>
        </ul>
      </div>
    </div>

  </div>

</footer>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script id="dsq-count-scr" src="//pwzxxm.disqus.com/count.js" async></script>

  </body>

</html>
